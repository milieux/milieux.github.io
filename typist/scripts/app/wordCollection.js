define(["backbone","app/wordModel"],function(e,t){return e.Collection.extend({model:t,url:"/typist/data/words.json",initialize:function(){this.on("refresh",this.refreshModels,this)},active:function(){return this.findWhere({active:!0})},typed:function(){return this.where({typed:!0})},correct:function(){return this.where({correct:!0})},setNextActive:function(e){var t=this.indexOf(e)+1;t!==this.length&&this.at(t).set({active:!0})},refreshModels:function(){var e=this.clone().models;e.forEach(function(e){e.set({typed:!1},{silent:!0}),e.set({active:!1},{silent:!0}),e.unset("correct",{silent:!0})});var t=this.randomizeArray(e);this.reset(t)},randomizeArray:function(e){var t=e.length-1;for(;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}})});